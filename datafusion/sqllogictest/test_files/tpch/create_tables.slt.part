

# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at

#   http://www.apache.org/licenses/LICENSE-2.0

# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.

# Some modification to original tpch:
# 1. Add `_rev` field in each table to make csv reader compatible with generated tbl format
# 2. Add `limit xx` to some queries to avoid making slt files too large.

statement ok
CREATE EXTERNAL TABLE IF NOT EXISTS supplier (
        s_suppkey  BIGINT NOT NULL,
        s_name VARCHAR NOT NULL,
        s_address VARCHAR NOT NULL,
        s_nationkey BIGINT NOT NULL,
        s_phone VARCHAR NOT NULL,
        s_acctbal DECIMAL(15, 2) NOT NULL,
        s_comment VARCHAR NOT NULL,
        s_rev VARCHAR NOT NULL,
) STORED AS CSV LOCATION 'test_files/tpch/data/supplier.tbl' OPTIONS ('format.delimiter' '|', 'format.has_header' 'false');

statement ok
CREATE EXTERNAL TABLE IF NOT EXISTS part (
        p_partkey BIGINT NOT NULL,
        p_name VARCHAR NOT NULL,
        p_mfgr VARCHAR NOT NULL,
        p_brand VARCHAR NOT NULL,
        p_type VARCHAR NOT NULL,
        p_size INTEGER NOT NULL,
        p_container VARCHAR NOT NULL,
        p_retailprice DECIMAL(15, 2) NOT NULL,
        p_comment VARCHAR NOT NULL,
        p_rev VARCHAR NOT NULL,
) STORED AS CSV LOCATION 'test_files/tpch/data/part.tbl' OPTIONS ('format.delimiter' '|', 'format.has_header' 'false');


statement ok
CREATE EXTERNAL TABLE IF NOT EXISTS partsupp (
        ps_partkey BIGINT NOT NULL,
        ps_suppkey BIGINT NOT NULL,
        ps_availqty INTEGER NOT NULL,
        ps_supplycost DECIMAL(15, 2) NOT NULL,
        ps_comment VARCHAR NOT NULL,
        ps_rev VARCHAR NOT NULL,
) STORED AS CSV LOCATION 'test_files/tpch/data/partsupp.tbl' OPTIONS ('format.delimiter' '|', 'format.has_header' 'false');

statement ok
CREATE EXTERNAL TABLE IF NOT EXISTS customer (
        c_custkey BIGINT  NOT NULL,
        c_name VARCHAR NOT NULL,
        c_address VARCHAR NOT NULL,
        c_nationkey BIGINT NOT NULL,
        c_phone VARCHAR NOT NULL,
        c_acctbal DECIMAL(15, 2) NOT NULL,
        c_mktsegment VARCHAR NOT NULL,
        c_comment VARCHAR NOT NULL,
        c_rev VARCHAR NOT NULL,
) STORED AS CSV LOCATION 'test_files/tpch/data/customer.tbl' OPTIONS ('format.delimiter' '|', 'format.has_header' 'false');

statement ok
CREATE EXTERNAL TABLE IF NOT EXISTS orders (
        o_orderkey BIGINT NOT NULL,
        o_custkey BIGINT NOT NULL,
        o_orderstatus VARCHAR NOT NULL,
        o_totalprice DECIMAL(15, 2) NOT NULL,
        o_orderdate DATE NOT NULL,
        o_orderpriority VARCHAR NOT NULL,
        o_clerk VARCHAR NOT NULL,
        o_shippriority INTEGER NOT NULL,
        o_comment VARCHAR NOT NULL,
        o_rev VARCHAR NOT NULL,
)  STORED AS CSV LOCATION 'test_files/tpch/data/orders.tbl' OPTIONS ('format.delimiter' '|', 'format.has_header' 'false');

statement ok
CREATE EXTERNAL TABLE IF NOT EXISTS lineitem (
        l_orderkey BIGINT NOT NULL,
        l_partkey BIGINT NOT NULL,
        l_suppkey BIGINT NOT NULL,
        l_linenumber INTEGER NOT NULL,
        l_quantity DECIMAL(15, 2) NOT NULL,
        l_extendedprice DECIMAL(15, 2) NOT NULL,
        l_discount DECIMAL(15, 2) NOT NULL,
        l_tax DECIMAL(15, 2) NOT NULL,
        l_returnflag VARCHAR NOT NULL,
        l_linestatus VARCHAR NOT NULL,
        l_shipdate DATE NOT NULL,
        l_commitdate DATE NOT NULL,
        l_receiptdate DATE NOT NULL,
        l_shipinstruct VARCHAR NOT NULL,
        l_shipmode VARCHAR NOT NULL,
        l_comment VARCHAR NOT NULL,
        l_rev VARCHAR NOT NULL,
) STORED AS CSV LOCATION 'test_files/tpch/data/lineitem.tbl' OPTIONS ('format.delimiter' '|', 'format.has_header' 'false');

statement ok
CREATE EXTERNAL TABLE IF NOT EXISTS nation (
        n_nationkey BIGINT NOT NULL,
        n_name VARCHAR NOT NULL,
        n_regionkey BIGINT NOT NULL,
        n_comment VARCHAR NOT NULL,
        n_rev VARCHAR NOT NULL,
) STORED AS CSV LOCATION 'test_files/tpch/data/nation.tbl' OPTIONS ('format.delimiter' '|', 'format.has_header' 'false');

statement ok
CREATE EXTERNAL TABLE IF NOT EXISTS region (
        r_regionkey BIGINT NOT NULL,
        r_name VARCHAR NOT NULL,
        r_comment VARCHAR NOT NULL,
        r_rev VARCHAR NOT NULL,
) STORED AS CSV LOCATION 'test_files/tpch/data/region.tbl' OPTIONS ('format.delimiter' '|', 'format.has_header' 'false');
